\MODIFICADO PARA PELLETS, CERRAR AL TERMINO DE LA SESION, VALORES DE LL Y DESCUENTO Gloria Ochoa Septiembre 2022
\PRUEBA DE IMPULSIVIDAD DE ELECCION, DESCUENTO POR DEMORA - RENDA, RUNG, HINNENKAMP, LENZINI & MADDEN, 2018 - 09/07/2019
\Renda, R. C., Rung, J. M., Hinnenkamp, J. E., Lenzini, S. N., & Madden, G. J. (2018). Impulsive choice and pre-exposure to delays: iv. effects of delay- and immediacy-exposure training relative to maturational changes in impulsivity. \Journal of the Experimental Analysis of Behavior, 109(3), 587�599. https://doi.org/10.1002/jeab.432


\ OUTPUT
^DERECHA = 1 \PALANCA
^IZQUIERDA = 2 \PALANCA
^COMEDERO = 3
^LUZ = 9
^SONIDO = 10
^L_IZQ = 6
^L_DER = 5


\INPUT
^R_DERECHA = 1\RESPUESTA
^BEBER = 3
^R_IZQUIERDA = 2\RESPUESTA

\A = ELECCI�N DERECHA
\B = ELECCI�N IZQUIERDA
\C = MATRIZ DE EVENTOS GENERAL
\D = ENSAYOS
\E = CONTADOR DE EVENTOS
\F = TIEMPO TRANSCURRIDO
\G = RESPUESTAS BEBEDERO
\H = LISTA DE COMPONENTES
\I = CONTADOR PARA LISTA
\J = INTERVALO ENTRE REFORZADORES AJUSTABLE
\K = CONTADOR ENSAYOS FORZADOS
\L = CONTADOR ENSAYOS LIBRES
\M = CONTADOR DE DURACION DEL ENSAYO
\N = CONTADOR DE BLOQUES
\O =
\P = DEMORA ENTREGA REFORZAMIENTO
\SE REGISTRA EL N�MERO DE ENSAYOS Y LA ELECCI�N EN CADA UNO PARA CALCULAR EL PORCENTAJE DE ELECCI�N DE CADA ALTERNATIVA (ELECCI�N/ENSAYOS)*100

\SHOW 1 = ENSAYOS
\SHOW 2 = ELECCION GRANDE
\SHOW 3 = ELECCI�N PEQUE�A
\SHOW 4 =
\SHOW 5 =
\SHOW 6 =

\.1 - respuestas grande
\.12 - respuestas peque�o
\.13 - entradas bebedero
\.2 - reforzador grande
\.21 - reforzador peque�o
\.3 - ensayo forzado grande
\.31 - ensayo forzado PEQUE�O
\.32 - ensayo de elecci�n
\.5 - fin ensayo forzado grande
\.51 - fin ensayo forzado peque�o
\.52 - fin ensayo de elecci�n

\Z1 = REFORZDOR IZQUIERDA PEQUE�O
\Z2 = REFORZADOR DERECHA GRANDE
\Z3 = SELECCI�N INICIO ENSAYO FORZADO PEQUE�O - IZQUIERDA
\Z7 = SELECCI�N INICIO ENSAYO FORZADO GRANDE - DERECHA
\Z4 = SELECCI�N INICIO ENSAYO ELECCI�N PEQUE�O
\Z5 = FIN ENSAYO FORZADO PEQUE�O - IZQUIERDA
\Z6 = FIN ENSAYO FORZADO GRANDE - DERECHA
\Z12 = FIN DE ENSAYO ELECCI�N
\Z13 = FIN ENSAYOS PERDIDOS REPETIDOS
\Z9 = INICIO LUZ INTERMITENTE ENSAYOS DE ELECCI�N
\Z8 = INICIO LUZ INTERMITENTE IZQUIERDA FORZADO PEQUE�O
\Z11 = INICIO LUZ INTERMITENTE DERECHA FORZADO GRANDE
\Z10 = FIN LUZ INTERMITENTE ENSAYOS FORZADOS - AMBOS
\Z14 = INICIO DE ALEATORIZACI�N DE ENSAYOS

LIST H = 1,1,2,2,1,2
DIM C = 9999
DIM D = 3
DIM A = 3
DIM B = 3

S.S.1 \CONTADOR DE TIEMPO
    S1,
        #START: SET O = 44400 ---> S2 \FIN DE LA SESION 74 MINUTOS 44400 DECIMAS DE SEGUNDO
    S2,
        180":---> S3 \CAMBIAR A 180"
    S3,
        .1":ADD F;IF F >= O  [@SI, @NO]\SESION 74 MINUTOS
            @SI: SET C (E) = -987.987, F = F/600 ---> STOPSAVE
        @NO: ---> SX

S.S.2 \ ENTREGA DE REFORZAMIENTO
    
S1,
    #Z1: SET C(E) = F+.21; ADD E ---> S2 \PEQUE�O
#Z2: SET C(E) = F+.2; ADD E ---> S9
S2,
    0.1": ON^COMEDERO --->S8
S3,
    0.1": ON^COMEDERO ---> S4
S4,
    0.1": OFF^COMEDERO ---> S5
S5,
    0.1": ON^COMEDERO ---> S6
S6,
    0.1": OFF^COMEDERO ---> S7
S7,
    0.1": ON^COMEDERO ---> S8
S8,
    0.1": OFF^COMEDERO; OFF^L_IZQ; OFF^L_DER; Z13; Z14 ---> S1
S9,
    P#T: ---> S3

S.S.10 \LUZ INTERMITENTE ENSAYOS FORZADOS
    S1,
        #Z8: --->S2 \IZQUIERDA
    #Z11: ---> S4 \DERECHA
S2,
    1": OFF^L_IZQ --->S3
#Z10: OFF^L_IZQ--->S1
S3,
    1":ON^L_IZQ ---> S2
#Z10:OFF^L_IZQ--->S1
S4,
    1":OFF^L_DER --->S5
#Z10:OFF^L_DER--->S1
S5,
    1":ON^L_DER ---> S4
#Z10:OFF^L_DER--->S1

S.S.11 \LUZ INTERMITENTE ENSAYOS DE ELECCI�N
    S1,
        #Z9: --->S2 \IZQUIERDA Y DERECHA
    S2,
        1":OFF^L_IZQ; OFF^L_DER ---> S3
    #Z10: OFF^L_IZQ; OFF^L_DER---> S1
S3,
    1":ON^L_IZQ; ON^L_DER ---> S2
#Z10: OFF^L_IZQ; OFF^L_DER ---> S1

S.S.3 \ENSAYO FORZADO PEQUE�O - IZQUIERDA
    S1,
        #Z3:ON^L_IZQ; Z8; SET C(E) = F+.31; ADD E ---> S2
    S2,
        #R^BEBER: Z10; ON^IZQUIERDA; ON^L_IZQ; ADD E ---> S5
    30": Z10; Z13 ---> S3
S3,
    J#T: ON^L_IZQ; Z8;SET C(E) = F+.31; ADD E; SET O = O + 600 ---> S2 \ENSAYOS DE OMISI�N, REPETICI�N
S4,
    #R^R_IZQUIERDA: Z1; OFF^IZQUIERDA; Z6;SET C(E) = F+.12; ADD E ---> S1
30": Z13 ---> S3
S5,
    .05": ON^L_IZQ ---> S4

S.S.4 \ENSAYO FORZADO GRANDE - DERECHA
    S1,
        #Z7: ON^L_DER; Z11;SET C(E) = F+.3; ADD E ---> S2
    S2,
        #R^BEBER:Z10; ON^DERECHA; ON^L_DER---> S5
    30": Z10; Z13 ---> S3
S3,
    J#T: ON^L_DER

Z11

SET C(E) = F+.3

ADD E

SET O = O + 600 ---> S2 \ENSAYOS DE OMISI�N, REPETICI�N
S4,
    #R^R_DERECHA: Z2; OFF^DERECHA; Z5

SET C(E) = F+.1; ADD E ---> S1
30": Z13 ---> S3
S5,
    .05": ON^L_DER ---> S4

S.S.5 \ ENSAYOS DE ELECCI�N
    S1,
        #Z4:ON^L_IZQ; ON^L_DER; Z9; ADD D(N); SET C(E) = F+.32; ADD E ---> S2 \SUMA ENSAYOS DE ELECCI�N
    S2,
        #R^BEBER: Z10; ON^DERECHA; ON^IZQUIERDA ---> S4
    S3,
        #R^R_IZQUIERDA: Z1; OFF^IZQUIERDA; OFF^DERECHA; Z10; OFF^L_DER; ON^L_IZQ; Z12; ADD B(N);SET C(E) = F+.12; ADD E ---> S1
    #R^R_DERECHA: Z2; OFF^IZQUIERDA; OFF^DERECHA; Z10; OFF^L_IZQ; ON^L_DER; Z12; ADD A(N);SET C(E) = F+.1; ADD E ---> S1
30": OFF^IZQUIERDA; OFF^DERECHA; Z10; OFF^L_DER;OFF^L_IZQ; Z12; Z13; Z14 ---> S1
S4,
    0.5": ON^L_DER; ON^L_IZQ ---> S3

S.S.6\ SELECCI�N ENSAYOS FORZADOS ELECCI�N Y ALEATORIZACI�N, ACTUALIZACI�N DE VALOR DEMORA
    S1,
        #START: SET P = 0.01" ---> S2 \EL PRIMER BLOQUE CON MAGNITUD GRANDE TIENE RECOMPENSA INMEDIATA
    S2,
        180":---> S3 \EL PROGRAMA EMPIEZA DESPU�S DE 3 MINUTOS (180 SEGUNDOS) CAMBIAR
    S3,
        J#T: IF K >= 6 [@SI, @NO] \6 ENSAYOS FORZADOS, DESPU�S DE PRESENTAR 6 ENSAYOS FORZADOS PASA A ELEGIR ENSAYOS LIBRES
            @SI: Z4; ADD L; IF L >= 14 [@SI, @NO] \14 ENSAYOS LIBRES, DESPUES DE TERMINAR LOS ENSAYOS LIBRES VA AL TIEMPO ENTRE BLOQUES 7 MINUTOS O A TERMINAR LA SESI�N SI YA PASARON 3 BLOQUES (N = 3)
        @SI: ---> S6
    @NO: ---> S7
    @NO: RANDD I = H; IF I = 1 [@SI, @NO]
    @SI: Z3; ADD K ---> S7
    @NO: Z7; ADD K ---> S7
S6,
    7': SET K = 0; SET J = 0.01"; SET L = 0; ADD N; IF N = 1  [@SI, @NO]
        @SI: SET P = 15" ---> S3 \EN EL SEGUNDO BLOQUE LA DEMORA DE LA RECOMPENSA GRANDE AUMENTA A 15" CAMBIAR A 7
    @NO: IF N = 2 [@SI, @NO]
    @SI: SET P = 30" ---> S3 \EN EL �LTIMO BLOQUE LA DEMORA DE LA RECOMPENSA GRANDE AUMENTA A 30"
    @NO: ---> S3
S7,
    #Z14: ---> S4
S4,
    1": ---> S3

S.S.7\ DURACI�N AJUSTABLE INTERVALO ENTRE ENSAYOS
    S1,
        #Z3: ---> S2
    #Z7: ---> S2
#Z4: ---> S2
S2,
    0.01": ADD M ---> S2
#Z13:  ---> S3
S3,
    0.01": SET J = 6000-M; SET M = 0 ---> S1

S.S.8\ REGISTRO DE RESPUESTAS
    S1,
        #R^BEBER: SET C(E) = F+.13; ADD E ---> S2
    S2,
        .2": ---> S1
    \ Se est� midiendo en quintos de segundo; para transformar a segundos, dividir entre 5
#R^BEBER:---> S2

S.S.9 \
    S1,
        1": SHOW 1, BLOQUE1, D(0); SHOW 2, LL, A(0); SHOW 3, SS, B(0); SHOW 4, BLOQUE2, D(1); SHOW 5, LL, A(1); SHOW 6, SS, B(1); SHOW 7, BLOQUE3, D(2); SHOW 8, LL, A(2); SHOW 9, SS, B(2) ---> SX
    
